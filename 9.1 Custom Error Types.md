## ðŸš« Custom Error Types and Inspection ðŸ”Ž

While the standard library's `errors.New()` is sufficient for simple messages, professional Go code uses custom types to convey **structural information** about a failure, allowing the caller to inspect and react to the specific type of error.

### Creating Custom Error Types

Any Go type (typically a `struct`) that implements the built-in `error` interface (`Error() string`) can be used as a custom error.

#### Example: Custom `PermissionError`

Go

```
package main

import "fmt"

// Define a custom struct that holds relevant data about the error
type PermissionError struct {
	User string
	Resource string
}

// Implement the standard 'error' interface method
func (e *PermissionError) Error() string {
	return fmt.Sprintf("access denied for user %s to resource %s", e.User, e.Resource)
}

func checkAccess(user string) error {
	if user != "admin" {
		// Return an instance of our custom error type
		return &PermissionError{User: user, Resource: "/api/secret"}
	}
	return nil
}
```

### Error Inspection with `errors.Is` and `errors.As`

When using error wrapping (`fmt.Errorf` with `%w`), the original error might be buried deep in a chain of contextual errors. The standard library provides functions to safely inspect this chain:

1. **`errors.Is(err, target)`**: Checks if **any error in the chain** matches a specific sentinel error value (like `os.ErrNotExist` or a custom `var` error). This is the most common check.
    
2. **`errors.As(err, &target)`**: Checks if **any error in the chain** can be assigned to a specific **custom error type**. This is used to access the custom fields (like `User` or `Resource`) within the error struct.
    

#### Example: Inspecting the Error Chain

Go

```
package main

import (
	"errors"
	"fmt"
)

func main() {
	err := checkAccess("guest")
    
	if err != nil {
		// 1. Check using errors.As to see if the error is our specific type
		var permErr *PermissionError
		if errors.As(err, &permErr) {
			// Access structural data from the custom error
			fmt.Printf("Action Failed: User '%s' lacks permissions.\n", permErr.User)
		} else {
			fmt.Println("Action Failed: Unknown error type.")
		}
	}
}
// Output: Action Failed: User 'guest' lacks permissions.
```

**Key Takeaway:** Always use `errors.Is` or `errors.As` to check error types instead of manually comparing strings (e.g., `err.Error() == "some error"`), as string comparisons are fragile and break easily with wrapping.